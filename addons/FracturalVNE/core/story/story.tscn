[gd_scene load_steps=25 format=2]

[ext_resource path="res://addons/FracturalVNE/core/story/story_manager.gd" type="Script" id=1]
[ext_resource path="res://addons/FracturalVNE/core/story/director/story_director.gd" type="Script" id=2]
[ext_resource path="res://addons/FracturalVNE/core/story/story_loader.gd" type="Script" id=3]
[ext_resource path="res://addons/FracturalVNE/core/gui/basic_gui.tscn" type="PackedScene" id=4]
[ext_resource path="res://addons/FracturalVNE/core/story_script/story_services/ast_node_locator.gd" type="Script" id=5]
[ext_resource path="res://addons/FracturalVNE/core/story/history/history_manager.gd" type="Script" id=6]
[ext_resource path="res://addons/FracturalVNE/core/gui/story_gui_configurer.gd" type="Script" id=7]
[ext_resource path="res://addons/FracturalVNE/core/character/character_manager.gd" type="Script" id=8]
[ext_resource path="res://addons/FracturalVNE/core/story/story_runner_listener.gd" type="Script" id=9]
[ext_resource path="res://addons/FracturalVNE/assets/fonts/Noto_Sans/NotoSans-Regular-Title.tres" type="DynamicFont" id=10]
[ext_resource path="res://addons/FracturalVNE/core/utils/story_runtime_debugger.gd" type="Script" id=11]
[ext_resource path="res://addons/FracturalVNE/assets/themes/basic_gui_theme.tres" type="Theme" id=12]
[ext_resource path="res://addons/FracturalVNE/assets/fonts/Hack/Hack-Regular.tres" type="DynamicFont" id=13]
[ext_resource path="res://addons/FracturalVNE/core/misc/timer_registry.gd" type="Script" id=14]
[ext_resource path="res://addons/FracturalVNE/core/io/story_state_manager.gd" type="Script" id=15]
[ext_resource path="res://addons/FracturalVNE/core/gui/_misc/screenshot_manager.gd" type="Script" id=16]
[ext_resource path="res://addons/FracturalVNE/core/io/reference_registry.gd" type="Script" id=17]
[ext_resource path="res://addons/FracturalVNE/core/utils/dependency_injection/dependency.gd" type="Script" id=18]
[ext_resource path="res://addons/FracturalVNE/core/utils/serialization/serialization_manager.gd" type="Script" id=19]
[ext_resource path="res://addons/FracturalVNE/core/story/history/history_entries/say_entry/say_entry_serializer.gd" type="Script" id=20]
[ext_resource path="res://addons/FracturalVNE/core/io/resource_loader.gd" type="Script" id=21]
[ext_resource path="res://addons/FracturalVNE/core/visuals/visuals_manager.gd" type="Script" id=22]
[ext_resource path="res://addons/FracturalVNE/core/character/character_serializer.gd" type="Script" id=23]
[ext_resource path="res://addons/FracturalVNE/core/misc/general_functions.gd" type="Script" id=24]

[node name="Story" type="Node"]

[node name="Dependencies" type="Node" parent="."]

[node name="StoryRunnerDependency" type="Node" parent="Dependencies"]
script = ExtResource( 18 )
dependency_name = "StoryRunner"

[node name="StorySaveManagerDependency" type="Node" parent="Dependencies"]
script = ExtResource( 18 )
dependency_name = "StorySaveManager"

[node name="SceneManagerDependency" type="Node" parent="Dependencies"]
script = ExtResource( 18 )
dependency_name = "SceneManager"

[node name="StoryManager" type="Node" parent="."]
script = ExtResource( 1 )
story_loader_path = NodePath("../StoryLoader")
story_gui_configurer_path = NodePath("../StoryGUIConfigurer")
scene_manager_dep_path = NodePath("../Dependencies/SceneManagerDependency")

[node name="StoryStateManager" type="Node" parent="."]
script = ExtResource( 15 )
screenshot_manager_path = NodePath("../ScreenshotManager")
story_manager_path = NodePath("../StoryManager")
story_director_path = NodePath("../StoryLoader/StoryServices/StoryDirector")
ast_node_locator_path = NodePath("../StoryLoader/StoryServices/ASTNodeLocator")
story_save_manager_dep_path = NodePath("../Dependencies/StorySaveManagerDependency")

[node name="SerializationManager" type="Node" parent="."]
script = ExtResource( 19 )
serializers_holder_path = NodePath(".")

[node name="SayEntrySerializer" type="Node" parent="SerializationManager"]
script = ExtResource( 20 )
reference_registry_path = NodePath("../../StoryLoader/StoryServices/ReferenceRegistry")

[node name="CharacterSerializer" type="Node" parent="SerializationManager"]
script = ExtResource( 23 )
reference_registry_path = NodePath("../../StoryLoader/StoryServices/ReferenceRegistry")

[node name="StoryLoader" type="Node" parent="."]
script = ExtResource( 3 )
services_holder_path = NodePath("StoryServices")

[node name="StoryServices" type="Node" parent="StoryLoader"]

[node name="ReferenceRegistry" type="Node" parent="StoryLoader/StoryServices"]
script = ExtResource( 17 )
serialization_manager_path = NodePath("../../../SerializationManager")

[node name="StoryDirector" type="Node" parent="StoryLoader/StoryServices"]
script = ExtResource( 2 )
auto_step_duration = 0.25
skip_speed = 0.01

[node name="ASTNodeLocator" type="Node" parent="StoryLoader/StoryServices"]
script = ExtResource( 5 )

[node name="CharacterManager" type="Node" parent="StoryLoader/StoryServices"]
script = ExtResource( 8 )
reference_registry_path = NodePath("../ReferenceRegistry")
story_gui_configurer_path = NodePath("../../../StoryGUIConfigurer")

[node name="HistoryManager" type="Node" parent="StoryLoader/StoryServices"]
script = ExtResource( 6 )
story_director_path = NodePath("../StoryDirector")
serialization_manager_path = NodePath("../../../SerializationManager")

[node name="ResourceLoader" type="Node" parent="StoryLoader/StoryServices"]
script = ExtResource( 21 )

[node name="VisualsManager" type="Node" parent="StoryLoader/StoryServices"]
script = ExtResource( 22 )
reference_registry_path = NodePath("../ReferenceRegistry")
visuals_holder_path = NodePath("../../../WorldHolder/World/VisualsHolder")
story_director_path = NodePath("../StoryDirector")

[node name="TimerRegistry" type="Node" parent="StoryLoader/StoryServices"]
script = ExtResource( 14 )

[node name="GeneralFunctions" type="Node" parent="StoryLoader/StoryServices"]
script = ExtResource( 24 )

[node name="ScreenshotManager" type="Node" parent="."]
script = ExtResource( 16 )
facade_viewport_texture_rect_path = NodePath("FacadeViewportTextureRect")
story_gui_configurer_path = NodePath("../StoryGUIConfigurer")
world_path = NodePath("../WorldHolder/World")
screenshot_viewport_path = NodePath("ViewportContainer/ScreenshotViewport")
screenshot_gui_holder_path = NodePath("ViewportContainer/ScreenshotViewport/ScreenshotGUIHolder")

[node name="ViewportContainer" type="ViewportContainer" parent="ScreenshotManager"]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ScreenshotViewport" type="Viewport" parent="ScreenshotManager/ViewportContainer"]
size = Vector2( 1024, 600 )
handle_input_locally = false
render_target_update_mode = 3
physics_object_picking = true
gui_disable_input = true

[node name="ScreenshotGUIHolder" type="CanvasLayer" parent="ScreenshotManager/ViewportContainer/ScreenshotViewport"]

[node name="FacadeViewportTextureRect" type="TextureRect" parent="ScreenshotManager"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 0
expand = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="WorldHolder" type="Node" parent="."]

[node name="World" type="Node2D" parent="WorldHolder"]

[node name="VisualsHolder" type="Node2D" parent="WorldHolder/World"]

[node name="Camera2D" type="Camera2D" parent="WorldHolder/World"]
current = true
zoom = Vector2( 2, 2 )

[node name="StoryGUIConfigurer" type="CanvasLayer" parent="."]
script = ExtResource( 7 )
story_loader_path = NodePath("../StoryLoader")
story_gui_holder_path = NodePath(".")

[node name="BasicGUI" parent="StoryGUIConfigurer" instance=ExtResource( 4 )]

[node name="StoryDirectorDependency" parent="StoryGUIConfigurer/BasicGUI/Dependencies" index="0"]
dependency_path = NodePath("../../../../StoryLoader/StoryServices/StoryDirector")

[node name="HistoryManagerDependency" parent="StoryGUIConfigurer/BasicGUI/Dependencies" index="1"]
dependency_path = NodePath("../../../../StoryLoader/StoryServices/HistoryManager")

[node name="StorySaveManagerDependency" parent="StoryGUIConfigurer/BasicGUI/Dependencies" index="2"]
dependency_path = NodePath("../../../../Dependencies/StorySaveManagerDependency")

[node name="StoryStateManagerDependency" parent="StoryGUIConfigurer/BasicGUI/Dependencies" index="3"]
dependency_path = NodePath("../../../../StoryStateManager")

[node name="StoryRuntimeDebugger" type="CanvasLayer" parent="."]
layer = 10
script = ExtResource( 11 )
story_manager_path = NodePath("../StoryManager")
quit_button_path = NodePath("ErrorUI/Panel/MarginContainer/VSplitContainer/QuitButton")
error_ui_path = NodePath("ErrorUI")
error_text_path = NodePath("ErrorUI/Panel/MarginContainer/VSplitContainer/ErrorText")

[node name="ErrorUI" type="Control" parent="StoryRuntimeDebugger"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
theme = ExtResource( 12 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ColorRect" type="ColorRect" parent="StoryRuntimeDebugger/ErrorUI"]
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0, 0, 0, 0.392157 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Panel" type="Panel" parent="StoryRuntimeDebugger/ErrorUI"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 100.0
margin_top = 100.0
margin_right = -100.0
margin_bottom = -100.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MarginContainer" type="MarginContainer" parent="StoryRuntimeDebugger/ErrorUI/Panel"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_constants/margin_right = 20
custom_constants/margin_top = 20
custom_constants/margin_left = 20
custom_constants/margin_bottom = 20
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VSplitContainer" type="VBoxContainer" parent="StoryRuntimeDebugger/ErrorUI/Panel/MarginContainer"]
margin_left = 20.0
margin_top = 20.0
margin_right = 804.0
margin_bottom = 380.0

[node name="Title" type="RichTextLabel" parent="StoryRuntimeDebugger/ErrorUI/Panel/MarginContainer/VSplitContainer"]
margin_right = 784.0
margin_bottom = 50.0
rect_min_size = Vector2( 0, 50 )
custom_fonts/normal_font = ExtResource( 10 )
text = "Error"

[node name="ErrorText" type="TextEdit" parent="StoryRuntimeDebugger/ErrorUI/Panel/MarginContainer/VSplitContainer"]
margin_top = 54.0
margin_right = 784.0
margin_bottom = 316.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_fonts/font = ExtResource( 13 )
text = "This is where the stack trace is displayed."
readonly = true
wrap_enabled = true

[node name="QuitButton" type="Button" parent="StoryRuntimeDebugger/ErrorUI/Panel/MarginContainer/VSplitContainer"]
margin_left = 292.0
margin_top = 320.0
margin_right = 492.0
margin_bottom = 360.0
rect_min_size = Vector2( 200, 40 )
size_flags_horizontal = 4
text = "Quit"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="StoryRunnerListener" type="Node" parent="."]
script = ExtResource( 9 )
story_manager_path = NodePath("../StoryManager")
story_runner_dep_path = NodePath("../Dependencies/StoryRunnerDependency")

[editable path="StoryGUIConfigurer/BasicGUI"]
[editable path="StoryGUIConfigurer/BasicGUI/Panel/VBoxContainer/BasicTextPrinter"]
[editable path="StoryGUIConfigurer/BasicGUI/BasicPauseMenu"]
